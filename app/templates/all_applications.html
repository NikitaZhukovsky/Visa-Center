{% extends "base.html" %}

{% block content %}

<div class="row justify-content-center mt-5">
    <div class="col-md-10">
        {% if applications %}

            <div class="list-group">
                {% for application in applications %}
                    <div class="list-group-item list-group-item-action border rounded shadow-sm">
                        <div class="d-flex justify-content-between align-items-center">
                            <div>
                                <h5 class="mb-1 font-weight-bold">{{ application.status }}</h5>
                                <small class="text-muted h6">Submitted on: {{ application.submission_date|date:"F j, Y" }}</small><br>
                                <small class="text-muted h6">Applicant: {{ application.applicant }}</small>
                            </div>
                            <div class="ml-2">
                                <a href="{% url 'all_applications' %}" class="btn btn-success btn-long">Pay</a>
                            </div>
                        </div>

                        <hr>

                        <b class="font-weight-bold">Documents:</b>
                        <ul class="list-unstyled">
                            {% for doc_app in application.documentapplication_set.all %}
                                <li>
                                    <span class="badge badge-info">{{ doc_app.document.doc_type }}</span>
                                </li>
                            {% empty %}
                                <li class="text-muted">No documents available.</li>
                            {% endfor %}
                        </ul>
                    </div>
                {% endfor %}
            </div>
        {% else %}
            <div class="text-center">
                <h2 class="display-5">Looks like you don't have any applications!</h2>
                <br>
                <a role="button" class="btn btn-primary btn-lg" href="{% url 'application' %}">New Application</a>
            </div>
        {% endif %}
    </div>
</div>

<style>
    .btn-long {
        width: 100px;
        white-space: nowrap;
    }
</style>

{% endblock %}